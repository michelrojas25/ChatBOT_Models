import gradio as gr

# Funci√≥n de respuesta simulada
def chat_response(user_input, history):
    if history is None:
        history = []
    bot_response = f"Respuesta simulada: '{user_input}'"
    history.append({"role": "user", "content": user_input})
    history.append({"role": "assistant", "content": bot_response})
    return history, history

# Crear la interfaz con dise√±o centrado
with gr.Blocks() as chat_interface:
    with gr.Row(elem_id="header_row"):
        gr.Markdown("## ¬øCon qu√© puedo ayudarte?", elem_id="header")

    # √Årea de conversaci√≥n con historial
    with gr.Row(elem_id="chat_row"):
        chat_history = gr.Chatbot(label="", type="messages", elem_id="chat_area")

    # Entrada de texto y botones
    with gr.Row(elem_id="input_row"):
        user_input = gr.Textbox(
            placeholder="Env√≠a un mensaje a ChatGPT",
            show_label=False,
            elem_id="input_box"
        )
        gr.Button("‚úâÔ∏è Enviar", elem_id="send_button", variant="primary")

    # Acciones adicionales
    with gr.Row(elem_id="actions_row"):
        gr.Button("üñºÔ∏è Crea una imagen", elem_id="action_button")
        gr.Button("üìù Resume un texto", elem_id="action_button")
        gr.Button("üìä Analiza datos", elem_id="action_button")
        gr.Button("‚úçÔ∏è Ay√∫dame a escribir", elem_id="action_button")
        gr.Button("‚ûï M√°s", elem_id="action_button")
    
    # Estado para almacenar historial de mensajes
    state = gr.State()

    # Conectar el evento del bot√≥n y la entrada
    user_input.submit(chat_response, inputs=[user_input, state], outputs=[chat_history, state])

# CSS para centrar todo el contenido
chat_interface.css = """
body { 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    margin: 0; 
    background-color: #181818; /* Fondo oscuro */
}
#header_row, #chat_row, #input_row, #actions_row {
    width: 100%; 
    max-width: 800px; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
}
#header { 
    text-align: center; 
    font-size: 24px; 
    font-weight: bold; 
    margin-bottom: 10px; 
    color: #ffffff;
}
#chat_area { 
    height: 150px; 
    max-height: 150px; 
    overflow-y: auto; 
    border: 1px solid #ccc; 
    border-radius: 5px; 
    padding: 10px; 
    width: 100%; 
    max-width: 800px;
}
#input_row { 
    margin-top: 10px; 
    display: flex; 
    justify-content: center; 
    width: 100%; 
    max-width: 800px; 
}
#input_box { 
    flex-grow: 1; 
    margin-right: 10px; 
    height: 40px; 
}
#send_button { 
    width: 100px; 
}
#actions_row { 
    margin-top: 10px; 
    display: flex; 
    justify-content: space-around; 
    width: 100%; 
    max-width: 800px;
}
#action_button { 
    font-size: 14px; 
    padding: 5px 10px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
}
"""

# Lanzar la interfaz
chat_interface.launch()

